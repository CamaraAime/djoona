{% extends 'base.html' %}

{% block content %}

    <div class="container py-5">
        <div class="row g-5 d-flex align-items-start" style="padding-top:100px;">
            <div class="col-md-8 position-relative">
                <img id="mainImage" src="{{ images.first.image.url }}" 
                     class="d-block w-100" 
                     alt="{{ product.nom }}" 
                     style="object-fit: cover; height: 500px;">
            
                    <button type="button" class="btn btn-secondary view-all-button" data-bs-toggle="modal" data-bs-target="#imageGalleryModal">
                        Voir toutes les images
                    </button>
            
                <div class="mt-3 d-flex justify-content-center">
                    {% for image in images %}
                        <div class="mx-2">
                            <img src="{{ image.image.url }}" 
                                 class="img-fluid rounded" 
                                 alt="{{ product.nom }}" 
                                 style="object-fit: cover; height: 80px; cursor: pointer;" 
                                 onclick="changeMainImage('{{ image.image.url }}')">
                        </div>
                    {% endfor %}
                </div>
            </div>
            

            <div class="col-md-4">
                <div class="p-4 bg-white rounded" style="box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;">
                    <h2 class="fw-bold mb-4" style="text-transform: uppercase;">Détail du produit</h2>
                    
                    <p class="text-muted mb-2">
                        Marque : <strong style="text-transform: uppercase;">{{ product.marque }}</strong>
                    </p>
                    <hr class="my-2">
                    
                    <p class="text-muted mb-2">
                        Modèle : <strong>{{ product.modele }}</strong>
                    </p>
                    <hr class="my-2">
                    
                    <p class="text-muted mb-2">
                        Carburant : <strong>{{ product.carburant|capfirst }}</strong>
                    </p>
                    <hr class="my-2">
                    
                    <p class="text-muted mb-2">
                        Carrosserie : <strong>{{ product.type|capfirst }}</strong>
                    </p>
                    <hr class="my-2">
                    
                    <p class="text-muted mb-2">
                        Kilométrage : <strong>{{ product.kilometrage }} Km</strong>
                    </p>
                    <hr class="my-2">
                    
                    <p class="text-muted mb-2">
                        Transmission : <strong>{{ product.transmission|capfirst }}</strong>
                    </p>
                    <hr class="my-2">

                    <p class="text-muted">
                        Statut du véhicule : <strong style="background-color:#FFEBCC; color:#FF7101;">{{ product.statut }}</strong>
                    </p>
                    <hr class="my-2"><br/>
                    
                    <h5 class="mb-2 fw-bold">{{ product.prix }} F CFA</h5>

                    <div class="col-md-12 text-md-end">
                        <div class="row g-3 mt-2">
                            <div class="col-12 col-md-12 col-lg-12">
                                <a href="{% url 'contact' product.id %}" 
                                   class="btn btn-outline-primary w-100 py-3 d-flex align-items-center justify-content-center 
                                   {% if product.statut|lower == 'vendu' %}disabled{% endif %}">
                                    <i class="bi bi-envelope me-2"></i> Intéressé
                                </a>
                            </div>
                            <div class="col-12 col-md-12 col-lg-12">
                                <a href="https://wa.me/22540018376?text={{ whatsapp_message|urlencode }}" 
                                   target="_blank" 
                                   class="btn btn-success w-100 py-3 d-flex align-items-center justify-content-center 
                                   {% if product.statut|lower == 'vendu' %}disabled{% endif %}">
                                    <i class="bi bi-whatsapp me-2"></i> WhatsApp
                                </a>
                            </div>
                    
                            <div class="col-12 col-md-12 col-lg-12">
                                <button class="btn btn-outline-secondary w-100 w-md-auto 
                                {% if product.statut|lower == 'vendu' or product.statut|lower == 'vente' %}disabled{% endif %}" 
                                type="button" style="background: #154698; color: #fff; padding: 15px;" data-bs-toggle="modal" data-bs-target="#contactModal">
                                    <i class="bi bi-calendar-check me-2"></i> Réservation
                                </button>
                            </div>
                                       
                        </div>
                    </div>

                </div>
            </div>
        </div><br/><br/>

        <div class="features-container">
            <div class="feature-item">
                <i class="fas fa-smile feature-icon"></i>
                <h6>5 jours satisfait ou remboursé</h6>
                <p>La voiture ne vous convient pas ? On vous la rembourse</p>
            </div>
            <div class="feature-item">
                <i class="fas fa-shield-alt feature-icon"></i>
                <h6>Garantie  mois</h6>
                <p>Garantie extensible à  mois sur le moteur, la boîte et le pont</p>
            </div>
            <div class="feature-item">
                <i class="fas fa-life-ring feature-icon"></i>
                <h6>1 année assistance</h6>
                <p>Dépannage et remorquage inclus sur tous nos véhicules, pendant un an</p>
            </div>
            <div class="feature-item">
                <i class="fas fa-truck feature-icon"></i>
                <h6>Livraison à domicile</h6>
                <p>Nous pouvons livrer votre voiture où vous le souhaitez en Côte d'Ivoire</p>
            </div>
        </div>
    </div>
        


    
    <div class="section_info" style="background:#015479;padding:70px;">

        <div class="container">

            <h4 class="features-title" style="font-size: 24px;font-weight: bold;
                margin-bottom: 20px;text-align:center;text-transform: uppercase;
                color: #ffffff;margin-bottom:40px;">Informations générales sur la {{ product.marque }} ( {{ product.modele }} )
            </h4>

            <div class="row gx-2 mb-4 text-muted mt-5 text-center">
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-tachometer-alt"></i><br/>
                    <span style="color:#fff;"> kilométrage </span>                                                  
                    <p style="color:#fff;"> {{ product.kilometrage }} km</p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-gas-pump"></i><br/>
                    <span style="color:#fff;"> Type de carburant </span> 
                    <p style="color:#fff;"> {{ product.carburant|capfirst }} </p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-tools"></i><br/>
                    <span style="color:#fff;"> Boite de vitesse </span> 
                    <p style="color:#fff;">  {{ product.transmission|capfirst }} </p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fa-solid fa-car-battery"></i><br/>
                    <span style="color:#fff;"> Moteur </span> 
                    <p style="color:#fff;">  {{ product.moteur|capfirst }} </p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-chair"></i><br/>
                    <span style="color:#fff;"> Place </span> 
                    <p style="color:#fff;">  {{ product.place|capfirst }} </p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-car"></i><br/>
                    <span style="color:#fff;"> Couleur intérieur </span> 
                    <p style="color:#fff;">  {{ product.couleur_interieur|capfirst }} </p>
                </div>
            </div>

            <div class="row gx-2 mb-3 text-muted mt-4 text-center">
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-car"></i><br/>
                    <span style="color:#fff;"> Couleur extérieur </span> 
                    <p style="color:#fff;">  {{ product.couleur_exterieur|capfirst }} </p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-circle"></i><br/>
                    <span style="color:#fff;"> Cylindrée </span> 
                    <p style="color:#fff;">  {{ product.cylindre|capfirst }} </p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fa-solid fa-car"></i><br/>
                    <span style="color:#fff;"> Carrosserie </span> 
                    <p style="color:#fff;">  {{ product.type|capfirst }} </p>
                </div>

                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-tachometer-alt"></i><br/>
                    <span style="color:#fff;"> puissance fixcale </span> 
                    <p style="color:#fff;">  {{ product.puissance_fiscale|capfirst }} </p>
                </div>
                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-list-check"></i><br/>
                    <span style="color:#fff;"> Condition </span> 
                    <p style="color:#fff;">  {{ product.condition|capfirst }} </p>
                </div>

                <div class="col-2 text-center small" style="font-size: 17px;">
                    <i class="fas fa-key"></i><br/>
                    <span style="color:#fff;"> Nombre de propriétaire </span> 
                    <p style="color:#fff;">  {{ product.nbre_proprio|capfirst }} </p>
                </div>
            </div>
        
        </div>

    </div>

    <br/>



    <div class="section_infos" style="padding:70px;">

        <div class="container">

            <h4 class="features-title" style="font-size: 24px;font-weight: bold;
                margin-bottom: 20px;text-align:center;text-transform: uppercase;
                color: #000000;margin-bottom:40px;">Résumé sur la {{ product.marque }} ( {{ product.modele }} )
            </h4>

            <div class="container mt-5">
                <div class="row justify-content-center">
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; margin-right: 30px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-9">
                                <div class="input-group-append ms-3">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <label for="field1" class="form-label">Kilométrage</label>
                                </div>
                            </div>
            
                            <div class="col-3">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.kilometrage }} km
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-10">
                                <div class="input-group-append ms-3">
                                    <i class="fas fa-gas-pump"></i> 
                                    <label for="field1" class="form-label">Carburant</label>
                                </div>
                            </div>
            
                            <div class="col-2">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.carburant|capfirst }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row justify-content-center" style="margin-top:20px;">
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; margin-right: 30px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-9">
                                <div class="input-group-append ms-3">
                                    <i class="fas fa-tools"></i>
                                    <label for="field1" class="form-label">Boite de vitesse</label>
                                </div>
                            </div>
            
                            <div class="col-3">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.transmission|capfirst }}
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-10">
                                <div class="input-group-append ms-3">
                                    <i class="fas fa-car"></i> 
                                    <label for="field1" class="form-label">Carrosserie</label>
                                </div>
                            </div>
            
                            <div class="col-2">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.type|capfirst }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row justify-content-center" style="margin-top:20px;">
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; margin-right: 30px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-10">
                                <div class="input-group-append ms-3">
                                    <i class="fas fa-circle"></i>
                                    <label for="field1" class="form-label">Cylindré</label>
                                </div>
                            </div>
            
                            <div class="col-2">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.cylindre }}
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-11">
                                <div class="input-group-append ms-3">
                                    <i class="fas fa-tachometer-alt"></i> 
                                    <label for="field1" class="form-label">Puissance fixcale</label>
                                </div>
                            </div>
            
                            <div class="col-1">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.puissance_fiscale }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row justify-content-center" style="margin-top:20px;">
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; margin-right: 30px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-11">
                                <div class="input-group-append ms-3">
                                    <i class="fa-solid fa-car-battery"></i>
                                    <label for="field1" class="form-label">Moteur</label>
                                </div>
                            </div>
            
                            <div class="col-1">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.moteur }}
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div class="col-md-5" style="background-color: #f0f0f0; padding: 10px; border-left: 3px solid #015479;">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="col-10">
                                <div class="input-group-append ms-3">
                                    <i class="fas fa-list-check"></i> 
                                    <label for="field1" class="form-label">Condition</label>
                                </div>
                            </div>
            
                            <div class="col-2">
                                <div class="input-group-append ms-3 fw-bold">
                                    {{ product.condition }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
            </div>
        
        </div>

    </div>



    <div class="section_info" style="padding-top:50px;">

        <div class="container">

            <h4 class="features-title" style="font-size: 24px;font-weight: bolder;
                margin-bottom: 20px;text-align:center;text-transform: uppercase;
                color: #000000;margin-bottom:40px;">Pourquoi choisir Djona ?
            </h4>

            <div class="features-container">
                <div class="feature-items">
                    <i class="fas fa-smile feature-icon"></i>
                    <h6 class="fw-bold">5 jours satisfait ou remboursé</h6>
                    <p>La voiture ne vous convient pas ? On vous la rembourse</p>
                </div>
                <div class="feature-items">
                    <i class="fas fa-shield-alt feature-icon"></i>
                    <h6 class="fw-bold">Garantie  mois</h6>
                    <p>Garantie extensible à  mois sur le moteur, la boîte et le pont</p>
                </div>
                <div class="feature-items">
                    <i class="fas fa-life-ring feature-icon"></i>
                    <h6 class="fw-bold">1 année assistance</h6>
                    <p>Dépannage et remorquage inclus sur tous nos véhicules, pendant un an</p>
                </div>
                <div class="feature-items">
                    <i class="fas fa-truck feature-icon"></i>
                    <h6 class="fw-bold">Livraison à domicile</h6>
                    <p>Nous pouvons livrer votre voiture où vous le souhaitez en Côte d'Ivoire</p>
                </div>
            </div>
        
        </div>

    </div>


    <div class="container">
        <div class="row mt-5">
            <div class="col-12">
                <h2 class="h4 fw-bold">Description de {{ product.marque }}</h2>
                <p class="text-muted">{{ product.description }}</p>
            </div>
        </div>
    </div>

    <br/><br/>
    <div class="container">
        <div class="col-lg-12 col-sm-6 col-12 mt-4">
            <h2 class="fw-bold mb-4" style="text-transform: uppercase;font-size: 24px;">Résultats similaires</h2>
            
            <div class="row" style="padding-top: 15px;">

                {% for similar_product in similar_products %}
                    <div class="col-lg-3 col-sm-6 col-12 px-2 veh_next" style="padding:8px;">
                        <div class="vehicle-card" style=" box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;">
                        
                            <div class="vehicle-img" style="width:100%;height:200px;overflow:hidden;">
                                {% if produit.first_image_url %}
                                    <img src="{{ similar_product.image.url }}" alt="{{ similar_product.nom }}" class="img-fluid">
                                {% else %}
                                    <p>Pas d'image</p>
                                {% endif %}
                            </div>

                            <div class="vehicle-details p-3 mt-4">
                                <p class="mb-2 text-start fw-bold small">
                                    <span style="background-color:#FFEBCC; color:#FF7101; padding:3px 5px; border-radius:3px; margin-right:5px;">
                                        {{ similar_product.statut }}
                                    </span>
                                    <span style="background-color:#D6EAF8; color:#2980B9; padding:3px 5px; border-radius:3px; margin-right:5px;">
                                        {{ similar_product.ville }}
                                    </span>
                                    <span style="background-color:#D5F5E3; color:#27AE60; padding:3px 5px; border-radius:3px; margin-right:5px;">
                                        {{ similar_product.occasion_neuve }}
                                    </span>
                                    <span style="background-color:#FCF3CF; color:#F1C40F; padding:3px 5px; border-radius:3px; margin-right:5px;">
                                        {{ similar_product.annee }}
                                    </span>
                                </p>

                                <h5 class="text-dark fw-bold text-start mb-3 mt-4">{{ similar_product.marque|upper }}</h5>

                                <div class="row gx-2 mb-3 text-muted mt-3">
                                    <div class="col-4 text-center small" style="font-weight: 700;">
                                        <svg width="15" height="12" viewBox="0 0 15 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M6.59267 8.50926L12.9676 2.13426C13.017 2.0849 13.0756 2.04575 13.1401 2.01904C13.2046 1.99233 13.2737 1.97858 13.3435 1.97858C13.4133 1.97858 13.4824 1.99233 13.5469 2.01904C13.6114 2.04575 13.67 2.0849 13.7193 2.13426C13.7688 2.18362 13.8078 2.24222 13.8346 2.3067C13.8613 2.37119 13.8751 2.44032 13.8751 2.51012C13.8751 2.57992 13.8613 2.64904 13.8346 2.71353C13.8078 2.77803 13.7688 2.83662 13.7193 2.88598L7.34439 9.26098C7.29503 9.31038 7.23644 9.34948 7.17194 9.37615C7.10745 9.40293 7.03833 9.41663 6.96853 9.41663C6.89872 9.41663 6.82961 9.40293 6.76511 9.37615C6.70063 9.34948 6.64203 9.31038 6.59267 9.26098C6.54331 9.21157 6.50416 9.15303 6.47744 9.08853C6.45073 9.02404 6.43698 8.95498 6.43698 8.88517C6.43698 8.81532 6.45073 8.74619 6.47744 8.6817C6.50416 8.61722 6.54331 8.55862 6.59267 8.50926ZM7.49978 4.10387C7.96124 4.10328 8.41971 4.17798 8.85712 4.325C8.92354 4.34855 8.99397 4.35864 9.06432 4.35471C9.13467 4.35077 9.20354 4.33289 9.2669 4.30208C9.33028 4.27127 9.38689 4.22817 9.43344 4.17527C9.47999 4.12237 9.51555 4.06075 9.53807 3.99398C9.56057 3.9272 9.56957 3.85662 9.56453 3.78635C9.55951 3.71606 9.54054 3.64748 9.50875 3.5846C9.47696 3.52172 9.43297 3.46579 9.37936 3.42006C9.32575 3.37434 9.26357 3.33975 9.19646 3.31829C8.34986 3.03288 7.44495 2.96558 6.56546 3.12264C5.68595 3.27969 4.86026 3.656 4.16477 4.21678C3.46927 4.77757 2.92644 5.50469 2.58647 6.33089C2.24651 7.1571 2.1204 8.0557 2.21982 8.94361C2.23419 9.07345 2.29591 9.1934 2.39317 9.28063C2.49044 9.36786 2.61643 9.41621 2.74709 9.41642C2.76634 9.41642 2.78626 9.41642 2.80618 9.41302C2.94619 9.39751 3.07429 9.32706 3.16234 9.21709C3.25038 9.10713 3.29115 8.96666 3.27568 8.82668C3.25838 8.66967 3.24975 8.51183 3.24978 8.35387C3.25101 7.22707 3.69917 6.14679 4.49593 5.35002C5.2927 4.55326 6.37299 4.1051 7.49978 4.10387ZM14.1231 4.96715C14.0913 4.90506 14.0476 4.84985 13.9944 4.80466C13.9412 4.75948 13.8797 4.72522 13.8133 4.70382C13.7469 4.68242 13.6768 4.67431 13.6074 4.67995C13.5378 4.68561 13.4701 4.70489 13.4079 4.73672C13.3459 4.76856 13.2906 4.8123 13.2455 4.86547C13.2003 4.91863 13.166 4.98018 13.1446 5.04659C13.1232 5.11301 13.1151 5.18298 13.1207 5.25252C13.1264 5.32208 13.1457 5.38982 13.1775 5.45191C13.5706 6.22374 13.8026 7.06738 13.8597 7.93163C13.9168 8.79589 13.7977 9.66271 13.5095 10.4796L1.48337 10.4749C1.14783 9.51311 1.04708 8.48499 1.18948 7.47634C1.33189 6.46768 1.71334 5.50768 2.30204 4.67636C2.89073 3.84504 3.66961 3.16649 4.57377 2.69725C5.47791 2.22802 6.48113 1.98172 7.49978 1.97887H7.55821C8.54761 1.98509 9.52168 2.22394 10.4017 2.67613C10.464 2.7104 10.5325 2.73183 10.6031 2.73914C10.6739 2.74646 10.7453 2.73952 10.8133 2.71873C10.8812 2.69795 10.9443 2.66373 10.9988 2.61812C11.0533 2.57252 11.0982 2.51644 11.1306 2.4532C11.163 2.38997 11.1824 2.32087 11.1877 2.24999C11.1929 2.17913 11.1839 2.10792 11.1612 2.0406C11.1384 1.97328 11.1024 1.9112 11.0552 1.85805C11.0081 1.8049 10.9507 1.76176 10.8865 1.73118C9.56166 1.05259 8.0637 0.787134 6.58636 0.969151C5.10901 1.15118 3.72028 1.77229 2.59979 2.75217C1.4793 3.73205 0.678602 5.0256 0.301276 6.46549C-0.0760474 7.90539 -0.0126406 9.42534 0.483293 10.8288C0.556552 11.0367 0.692414 11.2169 0.87221 11.3445C1.052 11.472 1.2669 11.5409 1.48736 11.5414H13.5115C13.7319 11.5415 13.9468 11.4731 14.1266 11.3457C14.3064 11.2183 14.4421 11.0381 14.5149 10.8302C14.8499 9.87712 14.9881 8.86606 14.9207 7.85813C14.8533 6.85018 14.582 5.86708 14.1231 4.96715Z" fill="#696665"/>
                                        </svg>                                                    
                                        <p style="color:#222;"> {{ similar_product.kilometrage }}km</p>
                                    </div>
                                    <div class="col-4 text-center small" style="font-weight: 700;">
                                        <svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M15.0039 2.88587L13.7197 1.6029C13.6199 1.50322 13.4847 1.44721 13.3438 1.44721C13.2028 1.44721 13.0676 1.50322 12.9678 1.6029C12.8682 1.70258 12.8122 1.83779 12.8122 1.97876C12.8122 2.11973 12.8682 2.25494 12.9678 2.35462L14.2509 3.63892C14.3499 3.73814 14.4058 3.87254 14.4062 4.01278V9.41626C14.4062 9.55715 14.3503 9.6923 14.2507 9.79196C14.151 9.89152 14.0159 9.94751 13.875 9.94751C13.7341 9.94751 13.599 9.89152 13.4993 9.79196C13.3997 9.6923 13.3438 9.55715 13.3438 9.41626V6.76001C13.3438 6.33733 13.1759 5.93194 12.877 5.63306C12.5781 5.33418 12.1727 5.16626 11.75 5.16626H10.6875V1.97876C10.6875 1.55608 10.5196 1.15069 10.2207 0.851809C9.92186 0.552927 9.51643 0.38501 9.09375 0.38501H3.78125C3.35857 0.38501 2.95318 0.552927 2.6543 0.851809C2.35542 1.15069 2.1875 1.55608 2.1875 1.97876V12.0725H1.125C0.984102 12.0725 0.848973 12.1285 0.749353 12.2281C0.649723 12.3277 0.59375 12.4629 0.59375 12.6038C0.59375 12.7446 0.649723 12.8798 0.749353 12.9795C0.848973 13.079 0.984102 13.135 1.125 13.135H11.75C11.8909 13.135 12.026 13.079 12.1257 12.9795C12.2253 12.8798 12.2812 12.7446 12.2812 12.6038C12.2812 12.4629 12.2253 12.3277 12.1257 12.2281C12.026 12.1285 11.8909 12.0725 11.75 12.0725H10.6875V6.22876H11.75C11.8909 6.22876 12.026 6.28473 12.1257 6.38436C12.2253 6.48398 12.2812 6.61911 12.2812 6.76001V9.41626C12.2812 9.83892 12.4491 10.2444 12.748 10.5433C13.0469 10.8421 13.4523 11.01 13.875 11.01C14.2977 11.01 14.7031 10.8421 15.002 10.5433C15.3009 10.2444 15.4688 9.83892 15.4688 9.41626V4.01278C15.4696 3.80355 15.4289 3.59624 15.3491 3.40281C15.2693 3.20939 15.152 3.03369 15.0039 2.88587ZM3.25 12.0725V1.97876C3.25 1.83786 3.30597 1.70273 3.4056 1.60311C3.50522 1.50348 3.64035 1.44751 3.78125 1.44751H9.09375C9.23465 1.44751 9.36978 1.50348 9.4694 1.60311C9.56903 1.70273 9.625 1.83786 9.625 1.97876V12.0725H3.25ZM8.5625 5.69751C8.5625 5.83841 8.50653 5.97354 8.4069 6.07316C8.30728 6.17279 8.17215 6.22876 8.03125 6.22876H4.84375C4.70285 6.22876 4.56772 6.17279 4.4681 6.07316C4.36847 5.97354 4.3125 5.83841 4.3125 5.69751C4.3125 5.55661 4.36847 5.42148 4.4681 5.32186C4.56772 5.22223 4.70285 5.16626 4.84375 5.16626H8.03125C8.17215 5.16626 8.30728 5.22223 8.4069 5.32186C8.50653 5.42148 8.5625 5.55661 8.5625 5.69751Z" fill="#696665"/>
                                        </svg>   
                                        <p style="color:#222;"> {{ similar_product.carburant|capfirst }} </p>
                                    </div>
                                    <div class="col-4 text-center small" style="font-weight: 700;">
                                        <svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M12.4062 2.50992C12.406 2.11251 12.2944 1.72314 12.084 1.386C11.8736 1.04886 11.5729 0.777462 11.216 0.602648C10.8591 0.427825 10.4604 0.356584 10.065 0.397012C9.66978 0.43744 9.29365 0.587922 8.97958 0.831362C8.6654 1.07479 8.42591 1.40144 8.2881 1.77418C8.1503 2.14693 8.1198 2.55085 8.20002 2.94006C8.28024 3.32928 8.46809 3.6882 8.742 3.97605C9.01602 4.26391 9.36527 4.46916 9.75 4.56851V5.69742C9.75 5.83832 9.694 5.97344 9.59445 6.07307C9.49478 6.1727 9.35963 6.22867 9.21875 6.22867H3.375C3.19398 6.22862 3.01429 6.25961 2.84375 6.32031V4.56851C3.34453 4.43921 3.78098 4.1317 4.07126 3.70364C4.36154 3.27557 4.48573 2.75633 4.42056 2.24323C4.3554 1.73014 4.10533 1.25843 3.71725 0.916532C3.32917 0.57462 2.82971 0.385994 2.3125 0.385994C1.79529 0.385994 1.29583 0.57462 0.907755 0.916532C0.519677 1.25843 0.269606 1.73014 0.204443 2.24323C0.13927 2.75633 0.263465 3.27557 0.55374 3.70364C0.844026 4.1317 1.28047 4.43921 1.78125 4.56851V8.95136C1.28047 9.08067 0.844026 9.38815 0.55374 9.81623C0.263465 10.2443 0.13927 10.7636 0.204443 11.2766C0.269606 11.7897 0.519677 12.2614 0.907755 12.6033C1.29583 12.9452 1.79529 13.1339 2.3125 13.1339C2.82971 13.1339 3.32917 12.9452 3.71725 12.6033C4.10533 12.2614 4.3554 11.7897 4.42056 11.2766C4.48573 10.7636 4.36154 10.2443 4.07126 9.81623C3.78098 9.38815 3.34453 9.08067 2.84375 8.95136V7.82242C2.84375 7.68152 2.89972 7.54639 2.99935 7.44677C3.09898 7.34714 3.23411 7.29117 3.375 7.29117H9.21875C9.64141 7.29117 10.0469 7.12325 10.3457 6.82437C10.6446 6.52549 10.8125 6.1201 10.8125 5.69742V4.56851C11.2685 4.45008 11.6723 4.18373 11.9607 3.81122C12.2491 3.43869 12.4058 2.98103 12.4062 2.50992ZM1.25 2.50992C1.25 2.29978 1.31231 2.09436 1.42907 1.91963C1.54582 1.7449 1.71176 1.60872 1.9059 1.5283C2.10005 1.44788 2.31368 1.42684 2.51979 1.46783C2.72589 1.50883 2.91521 1.61003 3.0638 1.75862C3.21239 1.90721 3.31358 2.09653 3.35459 2.30264C3.39559 2.50874 3.37454 2.72238 3.29412 2.91652C3.21371 3.11067 3.07752 3.27661 2.90279 3.39336C2.72807 3.51011 2.52265 3.57242 2.3125 3.57242C2.03071 3.57242 1.76045 3.46048 1.5612 3.26123C1.36194 3.06196 1.25 2.79172 1.25 2.50992ZM3.375 11.01C3.375 11.2201 3.31269 11.4255 3.19593 11.6002C3.07919 11.775 2.91324 11.9112 2.7191 11.9915C2.52495 12.0719 2.31133 12.093 2.10521 12.0521C1.89911 12.011 1.70979 11.9098 1.5612 11.7612C1.41261 11.6126 1.31141 11.4233 1.27042 11.2172C1.22942 11.0111 1.25046 10.7975 1.33088 10.6033C1.41129 10.4092 1.54749 10.2433 1.7222 10.1265C1.89693 10.0097 2.10236 9.94745 2.3125 9.94745C2.59429 9.94745 2.86454 10.0593 3.0638 10.2587C3.26306 10.4579 3.375 10.7282 3.375 11.01ZM10.2812 3.57242C10.0711 3.57242 9.8657 3.51011 9.69092 3.39336C9.51625 3.27661 9.38003 3.11067 9.2996 2.91652C9.21917 2.72238 9.19813 2.50874 9.23915 2.30264C9.28016 2.09653 9.38131 1.90721 9.52995 1.75862C9.6786 1.61003 9.86783 1.50883 10.074 1.46783C10.2801 1.42684 10.4937 1.44788 10.6879 1.5283C10.882 1.60872 11.0479 1.7449 11.1647 1.91963C11.2815 2.09436 11.3437 2.29978 11.3437 2.50992C11.3437 2.79172 11.2318 3.06196 11.0325 3.26123C10.8333 3.46048 10.563 3.57242 10.2812 3.57242Z" fill="#696665"/>
                                        </svg>    
                                        <p style="color:#222;">  {{ similar_product.transmission|capfirst }} </p>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between align-items-center mt-4">
                                    <p class="fw-bold mb-0">{{ similar_product.prix }} FCFA</p>
                                    <a href="{% url 'product_detail' similar_product.id %}" class="btn btn-outline-secondary btn-sm rounded-pill">
                                        + Détails
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <p>Aucun produit similaire trouvé.</p>
                {% endfor %}
                
            </div>
        </div>
    </div>    <br/><br/>



    <!-- Modal pour afficher la galerie -->
    <div id="imageGalleryModal" class="modal fade" tabindex="-1" aria-labelledby="galleryModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="galleryModalLabel"> {{ product.marque }} </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Image principale -->
                    <div class="main-image-container position-relative text-center">
                        <img id="currentImage" 
                             class="img-fluid" 
                             style="max-height: 70vh; object-fit: contain;" 
                             src="{{ images.first.image.url }}" 
                             alt="Image principale">
                        <div id="imageCounter" 
                             class="position-absolute bottom-0 start-50 translate-middle-x bg-dark text-white py-1 px-3 rounded">
                            1 / {{ images|length }}
                        </div>
                    </div>
    
                    <!-- Navigation -->
                    <div class="navigation-controls position-absolute top-50 w-100 d-flex justify-content-between px-3">
                        <button class="btn btn-dark" id="prevImage" onclick="showPreviousImage()">&lt;</button>
                        <button class="btn btn-dark" id="nextImage" onclick="showNextImage()">&gt;</button>
                    </div>
    
                    <!-- Vignettes -->
                    <div class="thumbnails mt-3 d-flex justify-content-center">
                        {% for image in images %}
                            <div class="thumbnail mx-2">
                                <img src="{{ image.image.url }}" 
                                     class="img-fluid rounded"
                                     style="height: 80px; cursor: pointer;"
                                     onclick="setMainImage('{{ image.image.url }}', {{ forloop.counter }})">
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    

    <!-- Modal d'erreur -->
    <div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true" style="z-index: 2000;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header flex-column text-center" style="padding: 20px;">
                    <button type="button" class="btn-fermer" data-bs-dismiss="modal" aria-label="Close">X</button><br/>
    
                    <h3 class="fw-bold">Passez votre réservation</h3>
                    <p class="text-muted">Roulez en toutes sécurité <span style="color: red;font-weight:500;"> Tous champs sont obligatoires *</span></p>
                </div>
                
    
                <div class="modal-body text-center">
                    <div class="row justify-content-center">
                        <div class="col-lg-12 col-md-10 col-sm-12">
                            <form method="POST" action="" class="p-4 rounded border">
                                {% csrf_token %}
    
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <select id="civilite" name="civilite" class="form-control" required>
                                            <option value="" disabled selected>Choisissez une civilité</option>
                                            <option value="monsieur">Monsieur</option>
                                            <option value="madame">Madame</option>
                                            <option value="mademoiselle">Mademoiselle</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" id="nom" name="nom" class="form-control" placeholder="Entrez votre nom" required>
                                    </div>
                                </div>
    
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <input type="text" id="prenom" name="prenom" class="form-control" placeholder="Entrez votre prénom" required>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" id="numero" name="numero" class="form-control" placeholder="Entrez votre numéro" required>
                                    </div>
                                </div>
    
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <input type="text" id="ville" name="ville" class="form-control" placeholder="Entrez votre ville" required>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="email" id="email" name="email" class="form-control" placeholder="Entrez votre e-mail" required>
                                    </div>
                                </div>
    
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <input type="text" id="nom_entreprise" name="nom_entreprise" class="form-control" placeholder="Entrez le nom de votre entreprise" required>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="number" id="nombre_vehicule" name="nombre_vehicule" class="form-control" placeholder="Entrez le nombre de véhicules" required>
                                    </div>
                                </div>
    
                                <div class="row mb-4">
                                    <div class="col-md-12">
                                        <input type="text" id="localisation" name="localisation" class="form-control" placeholder="Entrez la localisation" required>
                                    </div>
                                </div>
    
                                <div class="text-center">
                                    <button type="submit" class="btn btn-primary w-100 py-3 d-flex align-items-center justify-content-center">
                                        <i class="bi bi-envelope me-2"></i> Soumettre le formulaire
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
    
            </div>
        </div>
    </div>


    <!-- Barre Fixe Invisible par Défaut -->
    <div id="fixedBar" class="fixed-bar d-none" style="padding: 20px;">
        <div class="container">
            <div class="row align-items-center">
                <!-- Image du Produit -->
                <div class="col-md-2">
                    <img id="mainImage" src="{{ images.first.image.url }}" 
                     class="d-block w-100" 
                     alt="{{ product.nom }}" 
                     style="object-fit: cover; height: 500px;">
                </div>
                <!-- Informations du Produit -->
                <div class="col-md-7">
                    <h5 class="mb-1 fw-bold">{{ product.marque|upper }}</h5>
                    <p class="mb-1 fw-bold">{{ product.modele }}</p>

                    <div class="row mt-3">
                        
                        <div class="col-2 text-start">
                            <svg width="15" height="12" viewBox="0 0 15 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.59267 8.50926L12.9676 2.13426C13.017 2.0849 13.0756 2.04575 13.1401 2.01904C13.2046 1.99233 13.2737 1.97858 13.3435 1.97858C13.4133 1.97858 13.4824 1.99233 13.5469 2.01904C13.6114 2.04575 13.67 2.0849 13.7193 2.13426C13.7688 2.18362 13.8078 2.24222 13.8346 2.3067C13.8613 2.37119 13.8751 2.44032 13.8751 2.51012C13.8751 2.57992 13.8613 2.64904 13.8346 2.71353C13.8078 2.77803 13.7688 2.83662 13.7193 2.88598L7.34439 9.26098C7.29503 9.31038 7.23644 9.34948 7.17194 9.37615C7.10745 9.40293 7.03833 9.41663 6.96853 9.41663C6.89872 9.41663 6.82961 9.40293 6.76511 9.37615C6.70063 9.34948 6.64203 9.31038 6.59267 9.26098C6.54331 9.21157 6.50416 9.15303 6.47744 9.08853C6.45073 9.02404 6.43698 8.95498 6.43698 8.88517C6.43698 8.81532 6.45073 8.74619 6.47744 8.6817C6.50416 8.61722 6.54331 8.55862 6.59267 8.50926ZM7.49978 4.10387C7.96124 4.10328 8.41971 4.17798 8.85712 4.325C8.92354 4.34855 8.99397 4.35864 9.06432 4.35471C9.13467 4.35077 9.20354 4.33289 9.2669 4.30208C9.33028 4.27127 9.38689 4.22817 9.43344 4.17527C9.47999 4.12237 9.51555 4.06075 9.53807 3.99398C9.56057 3.9272 9.56957 3.85662 9.56453 3.78635C9.55951 3.71606 9.54054 3.64748 9.50875 3.5846C9.47696 3.52172 9.43297 3.46579 9.37936 3.42006C9.32575 3.37434 9.26357 3.33975 9.19646 3.31829C8.34986 3.03288 7.44495 2.96558 6.56546 3.12264C5.68595 3.27969 4.86026 3.656 4.16477 4.21678C3.46927 4.77757 2.92644 5.50469 2.58647 6.33089C2.24651 7.1571 2.1204 8.0557 2.21982 8.94361C2.23419 9.07345 2.29591 9.1934 2.39317 9.28063C2.49044 9.36786 2.61643 9.41621 2.74709 9.41642C2.76634 9.41642 2.78626 9.41642 2.80618 9.41302C2.94619 9.39751 3.07429 9.32706 3.16234 9.21709C3.25038 9.10713 3.29115 8.96666 3.27568 8.82668C3.25838 8.66967 3.24975 8.51183 3.24978 8.35387C3.25101 7.22707 3.69917 6.14679 4.49593 5.35002C5.2927 4.55326 6.37299 4.1051 7.49978 4.10387ZM14.1231 4.96715C14.0913 4.90506 14.0476 4.84985 13.9944 4.80466C13.9412 4.75948 13.8797 4.72522 13.8133 4.70382C13.7469 4.68242 13.6768 4.67431 13.6074 4.67995C13.5378 4.68561 13.4701 4.70489 13.4079 4.73672C13.3459 4.76856 13.2906 4.8123 13.2455 4.86547C13.2003 4.91863 13.166 4.98018 13.1446 5.04659C13.1232 5.11301 13.1151 5.18298 13.1207 5.25252C13.1264 5.32208 13.1457 5.38982 13.1775 5.45191C13.5706 6.22374 13.8026 7.06738 13.8597 7.93163C13.9168 8.79589 13.7977 9.66271 13.5095 10.4796L1.48337 10.4749C1.14783 9.51311 1.04708 8.48499 1.18948 7.47634C1.33189 6.46768 1.71334 5.50768 2.30204 4.67636C2.89073 3.84504 3.66961 3.16649 4.57377 2.69725C5.47791 2.22802 6.48113 1.98172 7.49978 1.97887H7.55821C8.54761 1.98509 9.52168 2.22394 10.4017 2.67613C10.464 2.7104 10.5325 2.73183 10.6031 2.73914C10.6739 2.74646 10.7453 2.73952 10.8133 2.71873C10.8812 2.69795 10.9443 2.66373 10.9988 2.61812C11.0533 2.57252 11.0982 2.51644 11.1306 2.4532C11.163 2.38997 11.1824 2.32087 11.1877 2.24999C11.1929 2.17913 11.1839 2.10792 11.1612 2.0406C11.1384 1.97328 11.1024 1.9112 11.0552 1.85805C11.0081 1.8049 10.9507 1.76176 10.8865 1.73118C9.56166 1.05259 8.0637 0.787134 6.58636 0.969151C5.10901 1.15118 3.72028 1.77229 2.59979 2.75217C1.4793 3.73205 0.678602 5.0256 0.301276 6.46549C-0.0760474 7.90539 -0.0126406 9.42534 0.483293 10.8288C0.556552 11.0367 0.692414 11.2169 0.87221 11.3445C1.052 11.472 1.2669 11.5409 1.48736 11.5414H13.5115C13.7319 11.5415 13.9468 11.4731 14.1266 11.3457C14.3064 11.2183 14.4421 11.0381 14.5149 10.8302C14.8499 9.87712 14.9881 8.86606 14.9207 7.85813C14.8533 6.85018 14.582 5.86708 14.1231 4.96715Z" fill="#696665"/>
                            </svg>  
                            <p class="text-secondary" style="font-weight: 700;">{{ product.kilometrage }} km</p>
                        </div>
                        <div class="col-2 text-start">
                            <svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15.0039 2.88587L13.7197 1.6029C13.6199 1.50322 13.4847 1.44721 13.3438 1.44721C13.2028 1.44721 13.0676 1.50322 12.9678 1.6029C12.8682 1.70258 12.8122 1.83779 12.8122 1.97876C12.8122 2.11973 12.8682 2.25494 12.9678 2.35462L14.2509 3.63892C14.3499 3.73814 14.4058 3.87254 14.4062 4.01278V9.41626C14.4062 9.55715 14.3503 9.6923 14.2507 9.79196C14.151 9.89152 14.0159 9.94751 13.875 9.94751C13.7341 9.94751 13.599 9.89152 13.4993 9.79196C13.3997 9.6923 13.3438 9.55715 13.3438 9.41626V6.76001C13.3438 6.33733 13.1759 5.93194 12.877 5.63306C12.5781 5.33418 12.1727 5.16626 11.75 5.16626H10.6875V1.97876C10.6875 1.55608 10.5196 1.15069 10.2207 0.851809C9.92186 0.552927 9.51643 0.38501 9.09375 0.38501H3.78125C3.35857 0.38501 2.95318 0.552927 2.6543 0.851809C2.35542 1.15069 2.1875 1.55608 2.1875 1.97876V12.0725H1.125C0.984102 12.0725 0.848973 12.1285 0.749353 12.2281C0.649723 12.3277 0.59375 12.4629 0.59375 12.6038C0.59375 12.7446 0.649723 12.8798 0.749353 12.9795C0.848973 13.079 0.984102 13.135 1.125 13.135H11.75C11.8909 13.135 12.026 13.079 12.1257 12.9795C12.2253 12.8798 12.2812 12.7446 12.2812 12.6038C12.2812 12.4629 12.2253 12.3277 12.1257 12.2281C12.026 12.1285 11.8909 12.0725 11.75 12.0725H10.6875V6.22876H11.75C11.8909 6.22876 12.026 6.28473 12.1257 6.38436C12.2253 6.48398 12.2812 6.61911 12.2812 6.76001V9.41626C12.2812 9.83892 12.4491 10.2444 12.748 10.5433C13.0469 10.8421 13.4523 11.01 13.875 11.01C14.2977 11.01 14.7031 10.8421 15.002 10.5433C15.3009 10.2444 15.4688 9.83892 15.4688 9.41626V4.01278C15.4696 3.80355 15.4289 3.59624 15.3491 3.40281C15.2693 3.20939 15.152 3.03369 15.0039 2.88587ZM3.25 12.0725V1.97876C3.25 1.83786 3.30597 1.70273 3.4056 1.60311C3.50522 1.50348 3.64035 1.44751 3.78125 1.44751H9.09375C9.23465 1.44751 9.36978 1.50348 9.4694 1.60311C9.56903 1.70273 9.625 1.83786 9.625 1.97876V12.0725H3.25ZM8.5625 5.69751C8.5625 5.83841 8.50653 5.97354 8.4069 6.07316C8.30728 6.17279 8.17215 6.22876 8.03125 6.22876H4.84375C4.70285 6.22876 4.56772 6.17279 4.4681 6.07316C4.36847 5.97354 4.3125 5.83841 4.3125 5.69751C4.3125 5.55661 4.36847 5.42148 4.4681 5.32186C4.56772 5.22223 4.70285 5.16626 4.84375 5.16626H8.03125C8.17215 5.16626 8.30728 5.22223 8.4069 5.32186C8.50653 5.42148 8.5625 5.55661 8.5625 5.69751Z" fill="#696665"/>
                            </svg>   
                            <p class="text-secondary" style="font-weight: 700;">{{ product.carburant|capfirst }}</p>
                        </div>
                        <div class="col-2 text-start">
                            <svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12.4062 2.50992C12.406 2.11251 12.2944 1.72314 12.084 1.386C11.8736 1.04886 11.5729 0.777462 11.216 0.602648C10.8591 0.427825 10.4604 0.356584 10.065 0.397012C9.66978 0.43744 9.29365 0.587922 8.97958 0.831362C8.6654 1.07479 8.42591 1.40144 8.2881 1.77418C8.1503 2.14693 8.1198 2.55085 8.20002 2.94006C8.28024 3.32928 8.46809 3.6882 8.742 3.97605C9.01602 4.26391 9.36527 4.46916 9.75 4.56851V5.69742C9.75 5.83832 9.694 5.97344 9.59445 6.07307C9.49478 6.1727 9.35963 6.22867 9.21875 6.22867H3.375C3.19398 6.22862 3.01429 6.25961 2.84375 6.32031V4.56851C3.34453 4.43921 3.78098 4.1317 4.07126 3.70364C4.36154 3.27557 4.48573 2.75633 4.42056 2.24323C4.3554 1.73014 4.10533 1.25843 3.71725 0.916532C3.32917 0.57462 2.82971 0.385994 2.3125 0.385994C1.79529 0.385994 1.29583 0.57462 0.907755 0.916532C0.519677 1.25843 0.269606 1.73014 0.204443 2.24323C0.13927 2.75633 0.263465 3.27557 0.55374 3.70364C0.844026 4.1317 1.28047 4.43921 1.78125 4.56851V8.95136C1.28047 9.08067 0.844026 9.38815 0.55374 9.81623C0.263465 10.2443 0.13927 10.7636 0.204443 11.2766C0.269606 11.7897 0.519677 12.2614 0.907755 12.6033C1.29583 12.9452 1.79529 13.1339 2.3125 13.1339C2.82971 13.1339 3.32917 12.9452 3.71725 12.6033C4.10533 12.2614 4.3554 11.7897 4.42056 11.2766C4.48573 10.7636 4.36154 10.2443 4.07126 9.81623C3.78098 9.38815 3.34453 9.08067 2.84375 8.95136V7.82242C2.84375 7.68152 2.89972 7.54639 2.99935 7.44677C3.09898 7.34714 3.23411 7.29117 3.375 7.29117H9.21875C9.64141 7.29117 10.0469 7.12325 10.3457 6.82437C10.6446 6.52549 10.8125 6.1201 10.8125 5.69742V4.56851C11.2685 4.45008 11.6723 4.18373 11.9607 3.81122C12.2491 3.43869 12.4058 2.98103 12.4062 2.50992ZM1.25 2.50992C1.25 2.29978 1.31231 2.09436 1.42907 1.91963C1.54582 1.7449 1.71176 1.60872 1.9059 1.5283C2.10005 1.44788 2.31368 1.42684 2.51979 1.46783C2.72589 1.50883 2.91521 1.61003 3.0638 1.75862C3.21239 1.90721 3.31358 2.09653 3.35459 2.30264C3.39559 2.50874 3.37454 2.72238 3.29412 2.91652C3.21371 3.11067 3.07752 3.27661 2.90279 3.39336C2.72807 3.51011 2.52265 3.57242 2.3125 3.57242C2.03071 3.57242 1.76045 3.46048 1.5612 3.26123C1.36194 3.06196 1.25 2.79172 1.25 2.50992ZM3.375 11.01C3.375 11.2201 3.31269 11.4255 3.19593 11.6002C3.07919 11.775 2.91324 11.9112 2.7191 11.9915C2.52495 12.0719 2.31133 12.093 2.10521 12.0521C1.89911 12.011 1.70979 11.9098 1.5612 11.7612C1.41261 11.6126 1.31141 11.4233 1.27042 11.2172C1.22942 11.0111 1.25046 10.7975 1.33088 10.6033C1.41129 10.4092 1.54749 10.2433 1.7222 10.1265C1.89693 10.0097 2.10236 9.94745 2.3125 9.94745C2.59429 9.94745 2.86454 10.0593 3.0638 10.2587C3.26306 10.4579 3.375 10.7282 3.375 11.01ZM10.2812 3.57242C10.0711 3.57242 9.8657 3.51011 9.69092 3.39336C9.51625 3.27661 9.38003 3.11067 9.2996 2.91652C9.21917 2.72238 9.19813 2.50874 9.23915 2.30264C9.28016 2.09653 9.38131 1.90721 9.52995 1.75862C9.6786 1.61003 9.86783 1.50883 10.074 1.46783C10.2801 1.42684 10.4937 1.44788 10.6879 1.5283C10.882 1.60872 11.0479 1.7449 11.1647 1.91963C11.2815 2.09436 11.3437 2.29978 11.3437 2.50992C11.3437 2.79172 11.2318 3.06196 11.0325 3.26123C10.8333 3.46048 10.563 3.57242 10.2812 3.57242Z" fill="#696665"/>
                            </svg>  
                            <p class="text-secondary" style="font-weight: 700;">{{ product.transmission|capfirst }}</p>
                        </div>

                        <div class="col-2 text-start">
                            <strong style="background-color:#FFEBCC; color:#FF7101;">{{ product.statut }}</strong>
                        </div>
                    </div>

                    <div class="row mt-3"> 
                        <h5 class="mb-2 fw-bold">{{ product.prix }} FCFA</h5>
                    </div>
                </div>
                <!-- Prix et Boutons d'Action -->
                <div class="col-md-3 text-md-end">
                    <div class="row g-3 mt-2">
                        <div class="col-12 col-md-6 col-lg-6">
                            <a href="{% url 'contact' product.id %}" 
                               class="btn btn-outline-primary w-100 py-3 d-flex align-items-center justify-content-center 
                               {% if product.statut|lower == 'vendu' %}disabled{% endif %}">
                                <i class="bi bi-envelope me-2"></i> Intéressé
                            </a>
                        </div>
                        <div class="col-12 col-md-6 col-lg-6">
                            <a href="https://wa.me/22540018376?text={{ whatsapp_message|urlencode }}" 
                               target="_blank" 
                               class="btn btn-success w-100 py-3 d-flex align-items-center justify-content-center 
                               {% if product.statut|lower == 'vendu' %}disabled{% endif %}">
                                <i class="bi bi-whatsapp me-2"></i> WhatsApp
                            </a>
                        </div>
                
                        <div class="col-12 col-md-12 col-lg-12">
                            <button class="btn btn-outline-secondary w-100 w-md-auto 
                            {% if product.statut|lower == 'vendu' or product.statut|lower == 'vente' %}disabled{% endif %}" 
                            type="button" style="background: #154698; color: #fff; padding: 15px;" data-bs-toggle="modal" data-bs-target="#contactModal">
                                <i class="bi bi-calendar-check me-2"></i> Réservation
                            </button>
                        </div>
                                   
                    </div>
                </div>
                
            </div>
        </div>
    </div>



    <script>    
        let currentIndex = 1;
        const totalImages = {{ images|length }};
        const imageList = [
            {% for image in images %}"{{ image.image.url }}"{% if not forloop.last %}, {% endif %}{% endfor %}
        ];

        function setMainImage(url, index) {
            document.getElementById('currentImage').src = url;
            currentIndex = index;
            updateCounter();
        }

        function showNextImage() {
            currentIndex = (currentIndex % totalImages) + 1;
            setMainImage(imageList[currentIndex - 1], currentIndex);
        }

        function showPreviousImage() {
            currentIndex = (currentIndex - 2 + totalImages) % totalImages + 1;
            setMainImage(imageList[currentIndex - 1], currentIndex);
        }

        function updateCounter() {
            const counter = document.getElementById('imageCounter');
            counter.textContent = `${currentIndex} / ${totalImages}`;
        }


        document.addEventListener('DOMContentLoaded', function () {
            const fixedBar = document.getElementById('fixedBar');
            const scrollTrigger = 500; // Pixels de défilement pour déclencher la barre
    
            window.addEventListener('scroll', function () {
                if (window.scrollY > scrollTrigger) {
                    fixedBar.classList.remove('d-none');
                    fixedBar.classList.add('visible');
                } else {
                    fixedBar.classList.remove('visible');
                    fixedBar.classList.add('d-none');
                }
            });
    
            // Fonction pour la réservation (à personnaliser)
            window.reserveProduct = function() {
                // Implémentez la logique de réservation ici
                alert('Réservation effectuée!');
            }
        });


        function changeMainImage(imageUrl) {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = imageUrl;
        }
    </script>    

    <style>
        .navigation-controls button {
            z-index: 10;
        }
        .thumbnails img:hover {
            border: 2px solid #007bff;
        }
        .view-all-button {
            position: absolute;
            bottom: 80px;
            right: 80px;
            z-index: 10;
            padding: 10px 15px;
            background-color: rgba(0, 0, 0, 0.6); /* Fond semi-transparent */
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
    
        .view-all-button:hover {
            background-color: rgba(0, 0, 0, 0.8); /* Fond plus foncé au survol */
        }

        .fixed-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #fff; /* Blanc semi-transparent */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 10px 0;
            z-index: 1050; /* Assure qu'elle est au-dessus des autres éléments */
            transition: 0.3s, opacity 0.3s ease-in-out;
        }
    
        /* Masquer la barre par défaut */
        .fixed-bar.d-none {
            top: -100px; /* Position hors de l'écran */
            opacity: 0;
        }
    
        /* Afficher la barre */
        .fixed-bar.visible {
            top: 0;
            opacity: 1;
            transition: top 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
    
        /* Ajustements pour les images et le texte */
        .fixed-bar img {
            max-height: 60px;
        }
    
        .fixed-bar h5 {
            font-size: 1.25rem;
        }
    
        .fixed-bar p {
            font-size: 0.9rem;
            color: #555;
        }
    
        /* Boutons dans la barre fixe */
        .fixed-bar .btn {
            font-size: 0.9rem;
        }

        .features-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 70px;
            margin-bottom: 70px;
        }
        
        .feature-item, .feature-items {
            text-align: center;
            max-width: 300px;
            height: 200px;
            background-color:  #fff;
            box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
            padding: 30px;
        }
        .feature-items {
            background-color:  #015479;
        }
        .feature-items:hover {
            background-color:  #ffffff;
            box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
            transition: .3s ease-in-out;
            border-bottom: 3px solid #015479;
        }
        .feature-items:hover .feature-icon, .feature-items:hover h6, .feature-items:hover p {
            color:  #000;
        }
        .feature-item:hover {
            background-color:  #015479;
            transition: .3s ease-in-out;
        }
        .feature-item:hover .feature-icon, .feature-item:hover h6, .feature-item:hover p {
            color:  #ffffff;
            transition: .3s ease-in-out;
        }
        
        .feature-icon {
            font-size: 32px;
            color: #000000; /* Couleur personnalisable */
            margin-bottom: 10px;
        }
        .feature-items .feature-icon, .feature-items h6, .feature-items p {
            color:  #ffffff;
        }
        
        .feature-item h6 {
            font-size: 18px;
            font-weight: bold;
            margin: 0;
            color: #333;
        }

        .feature-item p {
            font-size: 16px;
            margin: 5px;
            color: #a09e9e;
        }
        
        .section_info i {
            color: #fff;
            font-size: 24px;
        }
    </style>

{% endblock %}
